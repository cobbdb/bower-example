<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .panel{border:2px solid;position:absolute}
        #game{border-color:red;left:0;top:0}
        #menu{border-color:green}
        html,body{height:100%;min-height:100%;margin:0}
        *{overflow:hidden;position:relative}
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        var heartbeat;

        var Functions = {
            accessor: function (obj, field) {
                return function (data) {
                    if (data) {
                        obj[field] = data;
                        return obj;
                    }
                    return obj[field];
                };
            }
        };

        var Panel = function (width, height) {
            var data = {
                size: {}
            };
            if (height) {
                data.count = Dimension(width, height);
            } else {
                data.count = width;
            }
            return {
                count: Functions.accessor(data, 'count'),
                size: Functions.accessor(data, 'size')
            };
        };

        function Frame(o) {
            return {
                body: o.body,
                foot: o.foot,
                head: o.head,
                size: function (upright) {
                    if (upright) {
                        return {
                            width: o.body.count(),
                            height: o.body.count() + o.foot.count() + o.head.count()
                        };
                    } else {
                        return {
                            width: o.body.count() + o.foot.count() + o.head.count(),
                            height: o.body.count()
                        };
                    }
                }
            };
        }

        function Dimension(w, h) {
            return {
                width: w,
                height: h
            };
        }

        var Screen = function (o) {
            return {
                max: o.max,
                window: o.window,
                size: {
                    width: Math.min(o.window.width, o.max.width),
                    height: Math.min(o.window.height, o.max.height)
                },
                upright: (o.window.height > o.window.width)
            };
        };

        var Tile = {};

        var frame = Frame({
            body: Panel(10, 10),
            foot: Panel(4),
            head: Panel(2)
        });

        $(function () {
            heartbeat = setInterval(function () {
                var screen = Screen({
                    max: Dimension(1024, 768),
                    window: Dimension(
                        $(window).width(),
                        $(window).height()
                    )
                });

                var frameSize = frame.size(screen.upright);
                var tall = Math.floor(screen.size.height / frameSize.height);
                var wide = Math.floor(screen.size.width / frameSize.width);
                Tile.size = Math.min(tall, wide);

                if (screen.upright) {
                    Panel.board.size({
                        top: (screen.window.height - Tile.size * (Panel.board.count() + Panel.menu.count())) / 2,
                        left: (screen.window.width - Tile.size * Panel.board.count()) / 2,
                        width: Tile.size * Panel.board.count(),
                        height: Tile.size * Panel.board.count()
                    });
                    Panel.menu.size({
                        top: Tile.size * Panel.board.count() + Panel.board.size().top,
                        left: Panel.board.size().left,
                        width: Tile.size * Panel.board.count(),
                        height: Tile.size * Panel.menu.count()
                    });
                } else {
                    Panel.board.size({
                        top: (screen.window.height - Tile.size * Panel.board.count()) / 2,
                        left: (screen.window.width - Tile.size * (Panel.board.count() + Panel.menu.count())) / 2,
                        width: Tile.size * Panel.board.count(),
                        height: Tile.size * Panel.board.count()
                    });
                    Panel.menu.size({
                        top: Panel.board.size().top,
                        left: Tile.size * Panel.board.count() + Panel.board.size().left,
                        width: Tile.size * Panel.menu.count(),
                        height: Tile.size * Panel.board.count()
                    });
                }

                $('#game')
                    .outerWidth(Panel.board.size().width)
                    .outerHeight(Panel.board.size().height)
                    .offset({
                        top: Panel.board.size().top,
                        left: Panel.board.size().left
                    });
                $('#menu')
                    .outerWidth(Panel.menu.size().width)
                    .outerHeight(Panel.menu.size().height)
                    .offset({
                        top: Panel.menu.size().top,
                        left: Panel.menu.size().left
                    });
            }, 500);
        });
    </script>
</head>
<body>
    <div id="game" class="panel"></div>
    <div id="menu" class="panel"></div>
</body>
</html>
