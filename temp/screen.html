<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .panel{border:2px solid;position:absolute}
        #game{border-color:red;left:0;top:0}
        #menu{border-color:green}
        html,body{height:100%;min-height:100%;margin:0}
        *{overflow:hidden;position:relative}
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        var heartbeat;
        
        var Functions = {
            setter: function (data, field) {
                return function (o) {
                    if (o) {
                        data[field] = o;
                        return this;
                    }
                    return data[field];
                };
            }
        };
        
        var Board = function (count) {
            var data = {
                count: count,
                size: {}
            };
            return {
                count: Functions.setter(data, 'count'),
                size: Functions.setter(data, 'size')
            };
        };
        Board.game = Board(10);
        Board.menu = Board(4);
        
        var Screen = {
            max: {
                width: 1024,
                height: 768
            },
            size: {},
            window: {}
        };
        
        var Tile = {};
        
        $(function () {
            heartbeat = setInterval(function () {
                Screen.window.width = $(window).width();
                Screen.window.height = $(window).height();
                Screen.size.width = Math.min(Screen.window.width, Screen.max.width);
                Screen.size.height = Math.min(Screen.window.height, Screen.max.height);
                Screen.upright = (Screen.size.height > Screen.size.width);
                
                var tall, wide;
                if (Screen.upright) {
                    tall = Math.floor(Screen.size.height / (Board.game.count() + Board.menu.count()));
                    wide = Math.floor(Screen.size.width / Board.game.count());
                    Tile.size = Math.min(wide, tall);
                } else {
                    tall = Math.floor(Screen.size.height / Board.game.count());
                    wide = Math.floor(Screen.size.width / (Board.game.count() + Board.menu.count()));
                    Tile.size = Math.min(wide, tall);
                }
                
                if (Screen.upright) {
                    Board.game.size({
                        top: (Screen.window.height - Tile.size * (Board.game.count() + Board.menu.count())) / 2,
                        left: (Screen.window.width - Tile.size * Board.game.count()) / 2,
                        width: Tile.size * Board.game.count(),
                        height: Tile.size * Board.game.count()
                    });
                    Board.menu.size({
                        top: Tile.size * Board.game.count() + Board.game.size().top,
                        left: Board.game.size().left,
                        width: Tile.size * Board.game.count(),
                        height: Tile.size * Board.menu.count()
                    });
                } else {
                    Board.game.size({
                        top: (Screen.window.height - Tile.size * Board.game.count()) / 2,
                        left: (Screen.window.width - Tile.size * (Board.game.count() + Board.menu.count())) / 2,
                        width: Tile.size * Board.game.count(),
                        height: Tile.size * Board.game.count()
                    });
                    Board.menu.size({
                        top: Board.game.size().top,
                        left: Tile.size * Board.game.count() + Board.game.size().left,
                        width: Tile.size * Board.menu.count(),
                        height: Tile.size * Board.game.count()
                    });
                }
                
                $('#game')
                    .outerWidth(Board.game.size().width)
                    .outerHeight(Board.game.size().height)
                    .offset({
                        top: Board.game.size().top,
                        left: Board.game.size().left
                    });
                $('#menu')
                    .outerWidth(Board.menu.size().width)
                    .outerHeight(Board.menu.size().height)
                    .offset({
                        top: Board.menu.size().top,
                        left: Board.menu.size().left
                    });
            }, 500);
        });
    </script>
</head>
<body>
    <div id="game" class="panel"></div>
    <div id="menu" class="panel"></div>
</body>
</html>
