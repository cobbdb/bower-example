<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .panel{border:2px solid;position:absolute}
        #game{border-color:red;left:0;top:0}
        #menu{border-color:green}
        html,body{height:100%;min-height:100%;margin:0}
        *{overflow:hidden;position:relative}
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        var heartbeat;
        
        var Functions = {
            setter: function (data, field) {
                return function (o) {
                    if (o) {
                        data[field] = o;
                        return this;
                    }
                    return data[field];
                };
            }
        };
        
        var Board = function (count) {
            var data = {
                count: count,
                size: {}
            };
            return {
                count: Functions.setter(data, 'count'),
                size: Functions.setter(data, 'size')
            };
        };
        Board.game = Board(10);
        Board.menu = Board(4);
        
        var Screen = {
            max: {
                width: 1024,
                height: 768
            },
            size: {}
        };
        
        var Tile = {};
        
        function start() {
            heartbeat = setInterval(function () {
                Screen.size.width = Math.min($(window).width(), Screen.max.width);
                Screen.size.height = Math.min($(window).height(), Screen.max.height);
                Screen.upright = (Screen.size.height > Screen.size.width);
                
                if (Screen.upright) {
                    Tile.size = Math.floor(Screen.size.width / Board.game.count());
                } else {
                    Tile.size = Math.floor(Screen.size.height / Board.game.count());
                }
                
                Board.game.size({
                    top: 0,
                    left: 0,
                    width: Tile.size * Board.game.count(),
                    height: Tile.size * Board.game.count()
                });
                
                if (Screen.upright) {
                    Board.menu.size({
                        top: Tile.size * Board.game.count(),
                        left: 0,
                        width: Tile.size * Board.game.count(),
                        height: Tile.size * Board.menu.count()
                    });
                } else {
                    Board.menu.size({
                        top: 0,
                        left: Tile.size * Board.game.count(),
                        width: Tile.size * Board.menu.count(),
                        height: Tile.size * Board.game.count()
                    });
                }
                
                $('#game')
                    .outerWidth(Board.game.size().width)
                    .outerHeight(Board.game.size().height)
                    .offset({
                        top: 0,
                        left: 0
                    });
                $('#menu')
                    .outerWidth(Board.menu.size().width)
                    .outerHeight(Board.menu.size().height)
                    .offset({
                        top: Board.menu.size().top,
                        left: Board.menu.size().left
                    });
            }, 500);
        }
        $(document).on('keypress', function (e) {
            if (e.keyCode == 32) {
                clearInterval(heartbeat);
            } else if (e.keyCode == 13) {
                start();
            } else if (e.keyCode == 112) {
                console.log('==== START ====');
                console.log(Board);
                console.log(Screen);
                console.log(Tile);
                console.log('==== FIN ====');
            }
        });
        
        $(function () {
            start();
        });
    </script>
</head>
<body>
    <div id="game" class="panel"></div>
    <div id="menu" class="panel"></div>
</body>
</html>
